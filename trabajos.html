<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Trabajos - SEGURAL</title>

    <style>
        body {
            font-family: Arial, sans-serif;
            background: #0f1e4a;
            margin: 0;
            padding: 20px;
            color: white;
        }

        h1 {
            text-align: center;
            margin-bottom: 20px;
        }

        .formulario {
            max-width: 500px;
            margin: auto;
            background: rgba(255,255,255,0.1);
            padding: 20px;
            border-radius: 10px;
        }

        label {
            display: block;
            margin-top: 12px;
            font-weight: bold;
        }

        input, select {
            width: 100%;
            padding: 10px;
            margin-top: 5px;
            border-radius: 6px;
            border: none;
            font-size: 16px;
        }

        button {
            width: 100%;
            margin-top: 20px;
            padding: 14px;
            font-size: 18px;
            font-weight: bold;
            border: none;
            border-radius: 8px;
            cursor: pointer;
            background: white;
            color: #0f1e4a;
        }

        button:hover {
            opacity: 0.9;
        }

        .volver {
            margin-top: 15px;
            text-align: center;
        }

        .volver a {
            color: white;
            text-decoration: underline;
        }
    </style>
</head>
<body>

<h1>üß∞ Cargar trabajo</h1>

<div class="formulario">

    <label>Nombre del trabajo</label>
    <input type="text" id="nombreTrabajo" placeholder="Ej: Instalaci√≥n de alarma">

    <label>Dinero cobrado</label>
    <input type="number" id="montoTrabajo" placeholder="Ej: 50000">

    <label>Gastos del trabajo</label>
    <input type="number" id="gastosTrabajo" placeholder="Ej: 12000">

    <label>Fecha del trabajo</label>
    <input type="date" id="fechaTrabajo">

    <label>Estado del trabajo</label>
    <select id="estadoTrabajo">
        <option value="Pendiente">Pendiente</option>
        <option value="En proceso">En proceso</option>
        <option value="Finalizado">Finalizado</option>
    </select>

    <!-- DATOS DEL CLIENTE -->
    <label>Cliente</label>
    <input type="text" id="clienteNombre" placeholder="Ej: Juan P√©rez">

    <label>Direcci√≥n del cliente</label>
    <input type="text" id="direccionCliente" placeholder="Ej: Av. San Mart√≠n 123">

    <label>N√∫mero de tel√©fono</label>
    <input type="tel" id="telefonoCliente" placeholder="Ej: 11 2345 6789">

    <button onclick="guardarTrabajo()">Guardar trabajo</button>

    <div class="volver">
        <a href="index.html">‚¨Ö Volver al inicio</a>
    </div>

</div>

<script>
function guardarTrabajo() {

    const nombreTrabajo = document.getElementById("nombreTrabajo").value;
    const monto = document.getElementById("montoTrabajo").value;
    const gastos = document.getElementById("gastosTrabajo").value;
    const fecha = document.getElementById("fechaTrabajo").value;
    const estado = document.getElementById("estadoTrabajo").value;

    const cliente = document.getElementById("clienteNombre").value;
    const direccion = document.getElementById("direccionCliente").value;
    const telefono = document.getElementById("telefonoCliente").value;

    if (!nombreTrabajo || !monto || !fecha) {
        alert("Complet√° al menos nombre del trabajo, monto y fecha");
        return;
    }

    /* ===== GUARDAR TRABAJO ===== */
    const trabajo = {
        nombre: nombreTrabajo,
        monto,
        gastos: gastos || 0,
        fecha,
        estado,
        cliente,
        direccion,
        telefono
    };

    const trabajos = JSON.parse(localStorage.getItem("trabajos")) || [];
    trabajos.push(trabajo);
    localStorage.setItem("trabajos", JSON.stringify(trabajos));

    /* ===== GUARDAR CLIENTE (SEPARADO) ===== */
    if (cliente || direccion || telefono) {

        const clientes = JSON.parse(localStorage.getItem("clientes")) || [];

        const nuevoCliente = {
            nombre: cliente,
            direccion,
            telefono
        };

        clientes.push(nuevoCliente);
        localStorage.setItem("clientes", JSON.stringify(clientes));
    }

    alert("‚úÖ Trabajo y cliente guardados");

    document.getElementById("nombreTrabajo").value = "";
    document.getElementById("montoTrabajo").value = "";
    document.getElementById("gastosTrabajo").value = "";
    document.getElementById("fechaTrabajo").value = "";
    document.getElementById("clienteNombre").value = "";
    document.getElementById("direccionCliente").value = "";
    document.getElementById("telefonoCliente").value = "";
}
</script>

</body>
</html>
